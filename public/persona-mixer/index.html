<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>React App (Built)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body, #root { height: 100%; }
    
  .animate-in { animation: enter 0.3s ease-out; }
  .fade-in { --tw-enter-opacity: 0; }
  .zoom-in { --tw-enter-scale: 0.95; }
  .slide-in-from-bottom-4 { --tw-enter-translate-y: 1rem; }
  .slide-in-from-bottom-20 { --tw-enter-translate-y: 5rem; }
  .duration-300 { animation-duration: 0.3s; }
  .duration-500 { animation-duration: 0.5s; }
  @keyframes enter { from { opacity: var(--tw-enter-opacity, 1); transform: translate(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0)) scale(var(--tw-enter-scale, 1)); } }
  </style>
</head>
<body>
  <div id="root"></div>
  <script>

// LucideReact Shim (Built-in)
var LucideReact = (function() {
  var icons = {Plus:'M12 5v14M5 12h14',X:'M18 6L6 18M6 6l12 12',Check:'M20 6L9 17l-5-5',ChevronLeft:'M15 18l-6-6 6-6',ChevronRight:'M9 18l6-6-6-6',ChevronUp:'M18 15l-6-6-6 6',ChevronDown:'M6 9l6 6 6-6',Menu:'M4 6h16M4 12h16M4 18h16',Search:'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z',Settings2:'M4 21v-7m0-4V3m8 18v-9m0-4V3m8 18v-5m0-4V3M1 14h6m2-6h6m2 8h6',Trash2:'M3 6h18m-2 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2m-6 5v6m4-6v6',Save:'M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2zM17 21v-8H7v8M7 3v5h8',Download:'M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m4-5l5 5 5-5m-5 5V3',Upload:'M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m14-7l-5-5-5 5m5-5v12',FileText:'M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zM14 2v6h6m-4 5H8m8 4H8m2-8H8',FileSearch:'M4 22h14a2 2 0 002-2V7.5L14.5 2H6a2 2 0 00-2 2v3m14 0V2l6 6h-6M4 14a3 3 0 100 6 3 3 0 000-6zm-2.5 7.5L4 19',ExternalLink:'M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6m4-3h6v6m-11 5L21 3',Globe:'M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z',PlusCircle:'M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM12 8v8m-4-4h8',Archive:'M21 8v13H3V8M1 3h22v5H1V3zm9 9h4',RefreshCw:'M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15',Sparkles:'M12 3l1.912 5.813a2 2 0 001.275 1.275L21 12l-5.813 1.912a2 2 0 00-1.275 1.275L12 21l-1.912-5.813a2 2 0 00-1.275-1.275L3 12l5.813-1.912a2 2 0 001.275-1.275L12 3zM5 3v4M19 17v4M3 5h4m10 14h4',Loader2:'M21 12a9 9 0 11-6.219-8.56',MessageSquare:'M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z',Code:'M16 18l6-6-6-6M8 6l-6 6 6 6',Send:'M22 2L11 13m11-11l-7 20-4-9-9-4 20-7z',Copy:'M20 9h-9a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-9a2 2 0 00-2-2zM5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1',AlertCircle:'M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM12 8v4m0 4h.01',Info:'M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM12 16v-4m0-4h.01',Home:'M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z',User:'M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z',Heart:'M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z',Star:'M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z',Mail:'M4 4h16a2 2 0 012 2v12a2 2 0 01-2 2H4a2 2 0 01-2-2V6a2 2 0 012-2zm18 2l-10 7L2 6',Bell:'M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 01-3.46 0',Lock:'M19 11H5a2 2 0 00-2 2v7a2 2 0 002 2h14a2 2 0 002-2v-7a2 2 0 00-2-2zM7 11V7a5 5 0 0110 0v4',Eye:'M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8zM12 15a3 3 0 100-6 3 3 0 000 6z',Activity:'M22 12h-4l-3 9L9 3l-3 9H2'};
  var base = {};
  for (var name in icons) {
    (function(n, d) {
      base[n] = function(p) {
        p = p || {};
        var size = p.size || 24, color = p.color || 'currentColor', strokeWidth = p.strokeWidth || 2, className = p.className || '', style = p.style || {};
        return React.createElement('svg', { xmlns: 'http://www.w3.org/2000/svg', width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: color, strokeWidth: strokeWidth, strokeLinecap: 'round', strokeLinejoin: 'round', className: className, style: style }, React.createElement('path', { d: d }));
      };
    })(name, icons[name]);
  }
  var fallback = function(p) {
    p = p || {};
    var size = p.size || 24, color = p.color || 'currentColor', strokeWidth = p.strokeWidth || 2, className = p.className || '', style = p.style || {};
    return React.createElement('svg', { xmlns: 'http://www.w3.org/2000/svg', width: size, height: size, viewBox: '0 0 24 24', fill: 'none', stroke: color, strokeWidth: strokeWidth, strokeLinecap: 'round', strokeLinejoin: 'round', className: className, style: style }, React.createElement('circle', { cx: 12, cy: 12, r: 10 }));
  };
  return new Proxy(base, { get: function(t, p) { return t[p] || fallback; } });
})();

// Transpiled React Application
// version v1.18.2
// [VC] Persona Mixer AI Pro - Robust Debugged Build with Exponential Backoff

const {
  useState,
  useEffect,
  useRef
} = React;
const {
  User,
  Code,
  LineChart,
  Briefcase,
  Send,
  Loader2,
  AlertCircle,
  Plus,
  X,
  Check,
  Settings2,
  RotateCcw,
  Sparkles,
  ShieldCheck,
  Palette,
  HelpCircle,
  Download,
  Languages,
  History,
  FileText,
  Info,
  Zap,
  Clock,
  Copy,
  ClipboardCheck,
  Search,
  MessageSquare,
  FileJson,
  Users,
  Crown,
  TrendingUp,
  Lightbulb,
  Dices,
  ListChecks,
  Volume2,
  Quote,
  Music,
  Brush,
  Film,
  Camera,
  Brain,
  Pencil
} = LucideReact;

// --- Configuration ---
const CURRENT_VERSION = "v1.18.2";
const apiKey = ""; // Runtime provides this
const MODEL_NAME = "gemini-2.5-flash-preview-09-2025";
const BASE_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${apiKey}`;

// --- Static Data Pool ---
const FAMOUS_QUOTES = [{
  text: "芸術は爆発だ！",
  author: "岡本太郎"
}, {
  text: "想像してごらん、すべての人々が平和に暮らしている姿を。",
  author: "ジョン・レノン"
}, {
  text: "私は対象を、私が見るようにではなく、私が考えるように描く。",
  author: "ピカソ"
}, {
  text: "Stay hungry, stay foolish.",
  author: "ジョブズ"
}, {
  text: "リスクとは、自分が何をやっているか知らない時に起こるものだ。",
  author: "バフェット"
}, {
  text: "ピカピカ！ ピカチュウ！",
  author: "ピカチュウ"
}];
const ALL_PERSONA_POOL = {
  standard: [{
    id: 'marketer',
    label: {
      jp: "マーケター",
      en: "Marketer"
    },
    prompt: "市場動向と差別化。数字と市場を語る。",
    icon: 'LineChart'
  }, {
    id: 'engineer',
    label: {
      jp: "エンジニア",
      en: "Engineer"
    },
    prompt: "技術的実現性と効率。論理的に反論する。",
    icon: 'Code'
  }, {
    id: 'ceo',
    label: {
      jp: "経営者",
      en: "CEO"
    },
    prompt: "全体最適、収益性、戦略的判断。",
    icon: 'Briefcase'
  }, {
    id: 'user',
    label: {
      jp: "ユーザー",
      en: "User"
    },
    prompt: "直感と感情。使い心地と欲求を主張。",
    icon: 'User'
  }, {
    id: 'pikachu',
    label: {
      jp: "ピカチュウ",
      en: "Pikachu"
    },
    prompt: "カタカナの鳴き声のみで反応。感情重視。",
    icon: 'Zap'
  }],
  artists: [{
    id: 'picasso',
    label: {
      jp: "ピカソ",
      en: "Picasso"
    },
    prompt: "破壊と創造。多角的な再構築。",
    icon: 'Palette'
  }, {
    id: 'lennon',
    label: {
      jp: "J.レノン",
      en: "John Lennon"
    },
    prompt: "愛、平和、想像力。境界を消す提案。",
    icon: 'Music'
  }, {
    id: 'okamoto',
    label: {
      jp: "岡本太郎",
      en: "Taro Okamoto"
    },
    prompt: "芸術は爆発だ！。原始的なエネルギー。",
    icon: 'Sparkles'
  }, {
    id: 'miwa',
    label: {
      jp: "美輪明宏",
      en: "A. Miwa"
    },
    prompt: "唯美主義。愛と美の厳しい審美眼。",
    icon: 'User'
  }, {
    id: 'dali',
    label: {
      jp: "S.ダリ",
      en: "Dali"
    },
    prompt: "シュルレアリスム。夢と現実の交錯。",
    icon: 'Sparkles'
  }, {
    id: 'gogh',
    label: {
      jp: "ゴッホ",
      en: "Van Gogh"
    },
    prompt: "燃える情熱。感情に忠実な内面分析。",
    icon: 'Palette'
  }, {
    id: 'warhol',
    label: {
      jp: "ウォーホル",
      en: "Warhol"
    },
    prompt: "ポップ。複製可能性と商業美学。",
    icon: 'Camera'
  }, {
    id: 'kusama',
    label: {
      jp: "草間彌生",
      en: "Yayoi Kusama"
    },
    prompt: "水玉。宇宙的な反復と自己消滅。",
    icon: 'Sparkles'
  }, {
    id: 'banksy',
    label: {
      jp: "バンクシー",
      en: "Banksy"
    },
    prompt: "風刺、反権力。ストリートの皮肉。",
    icon: 'ShieldCheck'
  }, {
    id: 'freddie',
    label: {
      jp: "フレディ",
      en: "Freddie"
    },
    prompt: "劇的、限界超越。圧倒的表現力。",
    icon: 'Music'
  }, {
    id: 'chanel',
    label: {
      jp: "C.シャネル",
      en: "Chanel"
    },
    prompt: "エレガンスと自由。自立した本質の美。",
    icon: 'User'
  }, {
    id: 'kurosawa',
    label: {
      jp: "黒澤明",
      en: "Kurosawa"
    },
    prompt: "完璧な構図。ヒューマニズムと完成度。",
    icon: 'Film'
  }, {
    id: 'hokusai',
    label: {
      jp: "葛飾北斎",
      en: "Hokusai"
    },
    prompt: "万物への探究。常に自己更新する姿勢。",
    icon: 'Brush'
  }, {
    id: 'shikibu',
    label: {
      jp: "紫式部",
      en: "M. Shikibu"
    },
    prompt: "平安の雅。人間の心の移ろいや情趣。",
    icon: 'Pencil'
  }, {
    id: 'mozart',
    label: {
      jp: "モーツァルト",
      en: "Mozart"
    },
    prompt: "天真爛漫な天才。遊び心に満ちた調和。",
    icon: 'Music'
  }],
  legends: [{
    id: 'nobunaga',
    label: {
      jp: "織田信長",
      en: "Nobunaga"
    },
    prompt: "破壊と革新。実力主義と大胆な決断。",
    icon: 'Sparkles'
  }, {
    id: 'ryoma',
    label: {
      jp: "坂本龍馬",
      en: "S. Ryoma"
    },
    prompt: "組織を超えた同盟。柔軟な交渉術。",
    icon: 'Users'
  }, {
    id: 'ieyasu',
    label: {
      jp: "徳川家康",
      en: "Ieyasu"
    },
    prompt: "長期安定と忍耐。負けない堅実戦略。",
    icon: 'Briefcase'
  }, {
    id: 'suntzu',
    label: {
      jp: "孫子",
      en: "Sun Tzu"
    },
    prompt: "効率。戦わずして勝つ情報優位の兵法。",
    icon: 'ShieldCheck'
  }],
  ceos: [{
    id: 'jobs',
    label: {
      jp: "S.ジョブズ",
      en: "Jobs"
    },
    prompt: "極限のデザイン美学。市場調査を否定。",
    icon: 'Palette'
  }, {
    id: 'matsushita',
    label: {
      jp: "松下幸之助",
      en: "Matsushita"
    },
    prompt: "水道哲学。使命感と人を生かす王道。",
    icon: 'User'
  }, {
    id: 'musk',
    label: {
      jp: "E.マスク",
      en: "Elon Musk"
    },
    prompt: "第一原理思考。超高速実行とスケール。",
    icon: 'Zap'
  }, {
    id: 'son',
    label: {
      jp: "孫正義",
      en: "Masayoshi Son"
    },
    prompt: "300年ビジョン。AI革命への巨額投資。",
    icon: 'TrendingUp'
  }]
};
const ICON_MAP = {
  LineChart: /*#__PURE__*/React.createElement(LineChart, {
    className: "w-4 h-4"
  }),
  Code: /*#__PURE__*/React.createElement(Code, {
    className: "w-4 h-4"
  }),
  Briefcase: /*#__PURE__*/React.createElement(Briefcase, {
    className: "w-4 h-4"
  }),
  User: /*#__PURE__*/React.createElement(User, {
    className: "w-4 h-4"
  }),
  Palette: /*#__PURE__*/React.createElement(Palette, {
    className: "w-4 h-4"
  }),
  ShieldCheck: /*#__PURE__*/React.createElement(ShieldCheck, {
    className: "w-4 h-4"
  }),
  Sparkles: /*#__PURE__*/React.createElement(Sparkles, {
    className: "w-4 h-4"
  }),
  Zap: /*#__PURE__*/React.createElement(Zap, {
    className: "w-4 h-4"
  }),
  Users: /*#__PURE__*/React.createElement(Users, {
    className: "w-4 h-4"
  }),
  TrendingUp: /*#__PURE__*/React.createElement(TrendingUp, {
    className: "w-4 h-4"
  }),
  Music: /*#__PURE__*/React.createElement(Music, {
    className: "w-4 h-4"
  }),
  Film: /*#__PURE__*/React.createElement(Film, {
    className: "w-4 h-4"
  }),
  Brush: /*#__PURE__*/React.createElement(Brush, {
    className: "w-4 h-4"
  }),
  Camera: /*#__PURE__*/React.createElement(Camera, {
    className: "w-4 h-4"
  }),
  Pencil: /*#__PURE__*/React.createElement(Pencil, {
    className: "w-4 h-4"
  })
};

// --- App Component ---
const App = () => {
  // State
  const [lang, setLang] = useState('jp');
  const [query, setQuery] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isMeetingLoading, setIsMeetingLoading] = useState(false);
  const [personas, setPersonas] = useState(ALL_PERSONA_POOL.standard);
  const [selectedIds, setSelectedIds] = useState(ALL_PERSONA_POOL.standard.map(p => p.id));
  const [detailLevel, setDetailLevel] = useState('normal');
  const [activeTab, setActiveTab] = useState("");
  const [responses, setResponses] = useState(null);
  const [chatInput, setChatInput] = useState("");
  const [error, setError] = useState(null);
  const [showManual, setShowManual] = useState(false);
  const [toast, setToast] = useState(null);
  const [isAdding, setIsAdding] = useState(false);
  const [newLabel, setNewLabel] = useState("");
  const [newPrompt, setNewPrompt] = useState("");
  const [quoteIndex, setQuoteIndex] = useState(0);
  const resultsRef = useRef(null);
  const chatEndRef = useRef(null);

  // Wisdom Loop
  useEffect(() => {
    let interval;
    if (isLoading || isMeetingLoading) {
      interval = setInterval(() => setQuoteIndex(p => (p + 1) % FAMOUS_QUOTES.length), 3500);
    }
    return () => clearInterval(interval);
  }, [isLoading, isMeetingLoading]);

  // Chat auto-scroll
  useEffect(() => {
    if (activeTab && responses?.individual?.[activeTab]) {
      chatEndRef.current?.scrollIntoView({
        behavior: "smooth"
      });
    }
  }, [responses, activeTab]);

  // Audio Click
  const playClick = () => {
    try {
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      if (!AudioContext) return;
      const ctx = new AudioContext();
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = 'sine';
      osc.frequency.setValueAtTime(1000, ctx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(1, ctx.currentTime + 0.05);
      gain.gain.setValueAtTime(0.04, ctx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.05);
      osc.connect(gain);
      gain.connect(ctx.destination);
      osc.start();
      osc.stop(ctx.currentTime + 0.05);
    } catch (e) {}
  };
  const handleAction = fn => {
    playClick();
    if (fn) fn();
  };

  // Safe fetch with exponential backoff
  const fetchWithRetry = async (payload, retries = 5, backoff = 1000) => {
    try {
      const res = await fetch(BASE_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return await res.json();
    } catch (err) {
      if (retries > 0) {
        await new Promise(r => setTimeout(r, backoff));
        return fetchWithRetry(payload, retries - 1, backoff * 2);
      }
      throw err;
    }
  };

  // Safe JSON extractor
  const safeParseJSON = text => {
    if (!text) return null;
    try {
      // Find first { and last }
      const start = text.indexOf('{');
      const end = text.lastIndexOf('}');
      if (start !== -1 && end !== -1) {
        const jsonStr = text.substring(start, end + 1);
        return JSON.parse(jsonStr);
      }
      return JSON.parse(text); // fallback
    } catch (e) {
      console.error("JSON parse failed", e);
      return null;
    }
  };

  // Handlers
  const handleRandomScout = () => {
    handleAction(() => {
      const all = Object.values(ALL_PERSONA_POOL).flat();
      const shuffled = [...all].sort(() => 0.5 - Math.random());
      const count = Math.floor(Math.random() * 3) + 5;
      const selected = shuffled.slice(0, count);
      setPersonas(selected);
      setSelectedIds(selected.map(p => p.id));
      setResponses(null);
      setActiveTab("");
      setToast("精鋭をスカウトしました！");
    });
  };
  const handlePresetChange = key => {
    handleAction(() => {
      let list = ALL_PERSONA_POOL[key] || ALL_PERSONA_POOL.standard;
      if (key === 'artists') list = [...ALL_PERSONA_POOL.artists].sort(() => 0.5 - Math.random()).slice(0, 7);
      setPersonas(list);
      setSelectedIds(list.map(p => p.id));
      setResponses(null);
      setActiveTab("");
    });
  };
  const handleAnalyze = async () => {
    if (!query.trim() || selectedIds.length === 0) return;
    setIsLoading(true);
    setError(null);
    setResponses(null);
    const activeMembers = personas.filter(p => selectedIds.includes(p.id));
    const personaPrompt = activeMembers.map(p => `${p.id}: ${p.label.jp} (${p.prompt})`).join('\n');
    const instruction = `
      You are a specialized expert team. Analyze the topic: "${query}"
      Detail Level: ${detailLevel}
      Respond individually from each unique ideology.
      Expert Roster: ${personaPrompt}
      Rule: 'pikachu' MUST ONLY respond in KATAKANA onomatopoeia.
      Output format: JSON ONLY { "individual": { "personaId": "detailed analysis...", ... } }
    `;
    try {
      const result = await fetchWithRetry({
        contents: [{
          parts: [{
            text: query
          }]
        }],
        systemInstruction: {
          parts: [{
            text: instruction
          }]
        },
        generationConfig: {
          responseMimeType: "application/json",
          temperature: 0.7
        }
      });
      const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
      const parsed = safeParseJSON(text);
      if (!parsed) throw new Error("JSON invalid");
      const initialChats = {};
      Object.entries(parsed.individual || parsed).forEach(([id, content]) => {
        initialChats[id] = [{
          role: 'ai',
          text: content
        }];
      });
      setResponses({
        individual: initialChats,
        discussion: null,
        action_plan: null
      });
      setActiveTab(Object.keys(initialChats)[0] || "");
      setTimeout(() => resultsRef.current?.scrollIntoView({
        behavior: 'smooth'
      }), 300);
    } catch (err) {
      setError("AI生成中にエラーが発生しました。接続を確認し、議題を変えて再試行してください。");
    } finally {
      setIsLoading(false);
    }
  };
  const handleAdvisorChat = async advisorId => {
    if (!chatInput.trim() || isLoading) return;
    const userMsg = chatInput;
    setChatInput("");
    playClick();
    setResponses(prev => ({
      ...prev,
      individual: {
        ...prev.individual,
        [advisorId]: [...(prev.individual[advisorId] || []), {
          role: 'user',
          text: userMsg
        }]
      }
    }));
    setIsLoading(true);
    const advisor = personas.find(p => p.id === advisorId);
    const history = (responses.individual?.[advisorId] || []).map(m => `${m.role === 'ai' ? 'Advisor' : 'User'}: ${m.text}`).join('\n');
    const instruction = `
      Role: ${advisor?.label?.jp}. Core Philosophy: ${advisor?.prompt}.
      Current Topic: "${query}"
      Conversation context:
      ${history}
      User's input: "${userMsg}"
      TASK: Continue the dialogue naturally as this character.
      Pikachu uses ONLY KATAKANA.
      Return plain text.
    `;
    try {
      const result = await fetchWithRetry({
        contents: [{
          parts: [{
            text: `Respond to: ${userMsg}`
          }]
        }],
        systemInstruction: {
          parts: [{
            text: instruction
          }]
        },
        generationConfig: {
          temperature: 0.8
        }
      });
      const aiText = result.candidates?.[0]?.content?.parts?.[0]?.text || "...";
      setResponses(prev => ({
        ...prev,
        individual: {
          ...prev.individual,
          [advisorId]: [...(prev.individual[advisorId] || []), {
            role: 'ai',
            text: aiText
          }]
        }
      }));
    } catch (err) {
      setToast("通信エラーが発生しました。");
    } finally {
      setIsLoading(false);
    }
  };
  const handleMeeting = async () => {
    if (!responses?.individual) return;
    setIsMeetingLoading(true);
    setError(null);
    const context = Object.entries(responses.individual).map(([id, msgs]) => `${id}: ${msgs[0].text}`).join('\n\n');
    const instruction = `
      Continue consultation for topic: "${query}"
      Based on initial opinions: ${context}
      TASK: Simulate a fast-paced IDEOLOGICAL DEBATE.
      - Short turns. No forced agreement. 
      - Pikachu in Katakana.
      - Include a numbered "action_plan" list.
      Return JSON: { "discussion": "Full chat log...", "action_plan": ["Action 1", "Action 2", ...] }
    `;
    try {
      const result = await fetchWithRetry({
        contents: [{
          parts: [{
            text: "Enter boardroom."
          }]
        }],
        systemInstruction: {
          parts: [{
            text: instruction
          }]
        },
        generationConfig: {
          responseMimeType: "application/json",
          temperature: 0.9
        }
      });
      const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
      const parsed = safeParseJSON(text);
      if (!parsed) throw new Error("JSON invalid");
      setResponses(prev => ({
        ...prev,
        discussion: parsed.discussion,
        action_plan: parsed.action_plan
      }));
      setActiveTab("discussion");
    } catch (err) {
      setError("会議の生成に失敗しました。");
    } finally {
      setIsMeetingLoading(false);
    }
  };
  const handleCopyAll = () => {
    if (!responses) return;
    let text = `【Persona Mixer v${CURRENT_VERSION} 議事録】\n議題: ${query}\n\n`;
    Object.entries(responses.individual || {}).forEach(([id, msgs]) => {
      text += `■ ${id}の回答・対話\n`;
      msgs.forEach(m => text += ` ${m.role.toUpperCase()}: ${m.text}\n`);
      text += `\n`;
    });
    if (responses.discussion) {
      text += `■ 全員会議ログ\n${responses.discussion}\n\n■ 最終プラン\n${Array.isArray(responses.action_plan) ? responses.action_plan.join('\n') : responses.action_plan}`;
    }
    const el = document.createElement("textarea");
    el.value = text;
    document.body.appendChild(el);
    el.select();
    document.execCommand("copy");
    document.body.removeChild(el);
    setToast("レポートをコピーしました");
  };
  const t = {
    jp: {
      title: "Persona Mixer AI Pro",
      analyze: "個別意見を取得",
      startMeeting: "思想対話会議を開始",
      randomBtn: "ランダムスカウト",
      presets: "セット選択",
      loading: "知性を結集しています...",
      copy: "一括コピー",
      chatPlaceholder: "対話・考えを伝える...",
      action: "実行プラン"
    },
    en: {
      title: "Persona Mixer AI Pro",
      analyze: "Get Views",
      startMeeting: "Start Debate",
      randomBtn: "Random Scout",
      presets: "Thought Sets",
      loading: "Gathering Minds...",
      copy: "Copy Results",
      chatPlaceholder: "Message advisor...",
      action: "Action Plan"
    }
  }[lang];
  return /*#__PURE__*/React.createElement("div", {
    className: "min-h-screen bg-[#f8fafc] text-slate-900 font-sans flex flex-col relative antialiased"
  }, toast && /*#__PURE__*/React.createElement("div", {
    className: "fixed top-20 left-1/2 -translate-x-1/2 z-[200] animate-in fade-in slide-in-from-top-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-slate-900 text-white px-6 py-2 rounded-full shadow-2xl flex items-center gap-2 border border-slate-700"
  }, /*#__PURE__*/React.createElement(Check, {
    className: "w-4 h-4 text-green-400"
  }), /*#__PURE__*/React.createElement("span", {
    className: "text-sm font-bold"
  }, toast))), (isLoading || isMeetingLoading) && /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[150] bg-white/95 backdrop-blur-xl flex flex-col items-center justify-center p-8 overflow-hidden"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-center space-y-12 animate-in zoom-in duration-500 max-w-xl"
  }, /*#__PURE__*/React.createElement("div", {
    className: "relative w-24 h-24 mx-auto"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 border-4 border-blue-100 rounded-full"
  }), /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"
  }), /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 flex items-center justify-center"
  }, /*#__PURE__*/React.createElement(Brain, {
    className: "w-8 h-8 text-blue-600 animate-pulse"
  }))), /*#__PURE__*/React.createElement("h3", {
    className: "text-3xl font-black text-slate-800 tracking-tighter uppercase"
  }, t.loading), /*#__PURE__*/React.createElement("div", {
    key: quoteIndex,
    className: "bg-slate-50 p-10 rounded-[40px] border border-slate-100 shadow-sm animate-in fade-in slide-in-from-bottom-2 duration-1000"
  }, /*#__PURE__*/React.createElement(Quote, {
    className: "w-8 h-8 text-blue-200 mb-4 mx-auto"
  }), /*#__PURE__*/React.createElement("p", {
    className: "text-xl font-bold leading-relaxed text-slate-700 italic"
  }, "\u300C", FAMOUS_QUOTES[quoteIndex].text, "\u300D"), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] font-black text-slate-400 mt-8 uppercase tracking-widest"
  }, "\u2015 ", FAMOUS_QUOTES[quoteIndex].author)))), /*#__PURE__*/React.createElement("header", {
    className: "bg-white border-b border-slate-100 sticky top-0 z-40 px-6 h-16 flex items-center justify-between shadow-sm"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-blue-600 p-1.5 rounded-lg text-white"
  }, /*#__PURE__*/React.createElement(Sparkles, {
    className: "w-5 h-5"
  })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h1", {
    className: "font-black text-lg tracking-tighter text-slate-800"
  }, t.title), /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded font-bold"
  }, CURRENT_VERSION, " Debugged"))), /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(() => setLang(l => l === 'jp' ? 'en' : 'jp')),
    className: "p-2 border border-slate-200 rounded-lg hover:bg-slate-50 transition-all"
  }, /*#__PURE__*/React.createElement(Languages, {
    className: "w-5 h-5 text-blue-500"
  })), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(() => setShowManual(true)),
    className: "p-2 bg-slate-900 text-white rounded-lg shadow hover:bg-black transition-all"
  }, /*#__PURE__*/React.createElement(HelpCircle, {
    className: "w-5 h-5"
  })))), /*#__PURE__*/React.createElement("main", {
    className: "max-w-4xl mx-auto px-4 mt-8 flex-1 w-full pb-24"
  }, /*#__PURE__*/React.createElement("div", {
    className: "mb-10 animate-in fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between mb-4 px-1"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] font-black text-slate-400 uppercase tracking-widest"
  }, t.presets), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(handleRandomScout),
    className: "flex items-center gap-2 px-4 py-1.5 bg-slate-900 text-white rounded-full text-xs font-black hover:bg-black transition-all shadow-md"
  }, /*#__PURE__*/React.createElement(Dices, {
    className: "w-4 h-4 text-blue-400"
  }), " ", t.randomBtn)), /*#__PURE__*/React.createElement("div", {
    className: "flex overflow-x-auto gap-2 pb-2 no-scrollbar px-1"
  }, ['standard', 'artists', 'legends', 'ceos'].map(key => /*#__PURE__*/React.createElement("button", {
    key: key,
    onClick: () => handlePresetChange(key),
    className: "flex items-center gap-2 px-6 py-3 rounded-[20px] border border-slate-200 bg-white shadow-sm hover:border-blue-500 transition-all shrink-0 font-bold text-sm"
  }, key === 'standard' ? /*#__PURE__*/React.createElement(Settings2, {
    className: "w-4"
  }) : key === 'artists' ? /*#__PURE__*/React.createElement(Palette, {
    className: "w-4"
  }) : key === 'legends' ? /*#__PURE__*/React.createElement(Crown, {
    className: "w-4"
  }) : /*#__PURE__*/React.createElement(Briefcase, {
    className: "w-4"
  }), ALL_PERSONA_POOL[key] ? key === 'artists' ? "アーティスト (7名選抜)" : key === 'standard' ? "標準セット" : key === 'legends' ? "歴史の偉人" : "有名経営者" : key)))), /*#__PURE__*/React.createElement("section", {
    className: "bg-white rounded-[40px] shadow-sm border border-slate-200 p-8 mb-8 transition-all"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3 mb-6"
  }, /*#__PURE__*/React.createElement(FileText, {
    className: "w-6 h-6 text-blue-600"
  }), /*#__PURE__*/React.createElement("h2", {
    className: "font-black text-xl text-slate-800"
  }, "\u8B70\u984C\u3092\u6295\u4E0B")), /*#__PURE__*/React.createElement("textarea", {
    className: "w-full p-6 border border-slate-100 rounded-3xl h-32 mb-8 outline-none focus:ring-4 focus:ring-blue-50 text-xl font-medium bg-[#fbfcfd]",
    placeholder: "\u76F8\u8AC7\u3057\u305F\u3044\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044...",
    value: query,
    onChange: e => setQuery(e.target.value)
  }), /*#__PURE__*/React.createElement("div", {
    className: "mb-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between mb-4"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] font-black text-slate-400 uppercase tracking-widest"
  }, "\u9078\u629C\u30E1\u30F3\u30D0\u30FC"), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(() => setIsAdding(!isAdding)),
    className: "text-xs text-blue-600 font-bold hover:underline"
  }, "+ \u72EC\u81EA\u8FFD\u52A0")), isAdding && /*#__PURE__*/React.createElement("div", {
    className: "mb-6 p-6 bg-blue-50/50 border border-blue-100 rounded-3xl space-y-4 animate-in slide-in-from-top-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-2 gap-4"
  }, /*#__PURE__*/React.createElement("input", {
    className: "w-full p-3 border border-slate-200 rounded-xl text-sm",
    placeholder: "\u540D\u524D",
    value: newLabel,
    onChange: e => setNewLabel(e.target.value)
  }), /*#__PURE__*/React.createElement("input", {
    className: "w-full p-3 border border-slate-200 rounded-xl text-sm",
    placeholder: "\u601D\u60F3\u6307\u793A",
    value: newPrompt,
    onChange: e => setNewPrompt(e.target.value)
  })), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(() => {
      if (!newLabel) return;
      const id = `c_${Date.now()}`;
      setPersonas([...personas, {
        id,
        label: {
          jp: newLabel,
          en: newLabel
        },
        prompt: newPrompt,
        icon: 'Sparkles',
        color: 'slate'
      }]);
      setSelectedIds([...selectedIds, id]);
      setIsAdding(false);
      setNewLabel("");
      setNewPrompt("");
    }),
    className: "w-full bg-blue-600 text-white py-3 rounded-2xl text-sm font-black shadow-lg"
  }, "\u8FFD\u52A0\u3057\u3066\u78BA\u5B9A")), /*#__PURE__*/React.createElement("div", {
    className: "flex flex-wrap gap-2.5"
  }, personas.map(p => /*#__PURE__*/React.createElement("button", {
    key: p.id,
    onClick: () => handleAction(() => setSelectedIds(prev => prev.includes(p.id) ? prev.filter(i => i !== p.id) : [...prev, p.id])),
    className: `flex items-center gap-2.5 px-4 py-2.5 rounded-2xl border-2 transition-all ${selectedIds.includes(p.id) ? 'bg-white border-slate-900 shadow-lg scale-105 ring-4 ring-slate-900/5' : 'bg-slate-50 border-transparent opacity-60'}`
  }, /*#__PURE__*/React.createElement("div", {
    className: `p-1.5 rounded-xl ${selectedIds.includes(p.id) ? 'bg-slate-900 text-white' : 'bg-slate-200'}`
  }, ICON_MAP[p.icon] || /*#__PURE__*/React.createElement(Sparkles, {
    className: "w-4 h-4"
  })), /*#__PURE__*/React.createElement("span", {
    className: "text-sm font-black"
  }, p.label[lang] || p.label.jp))))), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(handleAnalyze),
    disabled: isLoading || !query.trim() || selectedIds.length === 0,
    className: "w-full py-5 bg-blue-600 text-white rounded-[24px] font-black text-xl hover:bg-blue-700 shadow-xl active:scale-[0.98] transition-all disabled:opacity-50"
  }, isLoading ? /*#__PURE__*/React.createElement(Loader2, {
    className: "w-6 h-6 animate-spin mx-auto"
  }) : t.analyze)), /*#__PURE__*/React.createElement("div", {
    ref: resultsRef
  }), error && /*#__PURE__*/React.createElement("div", {
    className: "mb-8 p-6 bg-red-50 border border-red-100 rounded-[28px] flex items-center gap-4 text-red-700 shadow-sm animate-in zoom-in"
  }, /*#__PURE__*/React.createElement(AlertCircle, {
    className: "w-6 h-6 flex-shrink-0"
  }), /*#__PURE__*/React.createElement("p", {
    className: "font-bold"
  }, error)), responses && /*#__PURE__*/React.createElement("div", {
    className: "animate-in slide-in-from-bottom-8 duration-500 space-y-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-blue-50 border-l-4 border-blue-600 p-5 rounded-r-2xl flex flex-col md:flex-row items-center justify-between shadow-sm gap-4"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-[11px] font-black text-blue-900 uppercase tracking-widest flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(Volume2, {
    className: "w-4 h-4"
  }), " \u8A73\u3057\u3055\u306E\u518D\u8A2D\u5B9A"), /*#__PURE__*/React.createElement("div", {
    className: "flex bg-white/80 p-1 rounded-xl gap-2"
  }, ['brief', 'normal', 'detailed'].map(lvl => /*#__PURE__*/React.createElement("button", {
    key: lvl,
    onClick: () => handleAction(() => setDetailLevel(lvl)),
    className: `px-6 py-1.5 rounded-lg text-[10px] font-black transition-all ${detailLevel === lvl ? 'bg-blue-600 text-white shadow-md' : 'text-slate-400 hover:bg-white'}`
  }, lvl === 'brief' ? "簡易" : lvl === 'normal' ? "普通" : "詳細")))), /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-[48px] shadow-2xl border border-slate-200 overflow-hidden flex flex-col md:flex-row min-h-[700px]"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full md:w-64 bg-[#fbfcfd] border-r border-slate-100 p-8 flex md:flex-col overflow-x-auto gap-2"
  }, Object.keys(responses?.individual || {}).map(id => /*#__PURE__*/React.createElement("button", {
    key: id,
    onClick: () => handleAction(() => setActiveTab(id)),
    className: `flex items-center gap-4 px-6 py-4 rounded-[20px] text-left text-sm font-black transition-all ${activeTab === id ? 'bg-white text-blue-600 shadow-xl border border-slate-50 scale-[1.05] z-10' : 'text-slate-400 hover:bg-slate-100'}`
  }, /*#__PURE__*/React.createElement("div", {
    className: activeTab === id ? 'text-blue-600' : 'text-slate-300'
  }, ICON_MAP[personas.find(p => p.id === id)?.icon] || /*#__PURE__*/React.createElement(Sparkles, {
    className: "w-4 h-4"
  })), personas.find(p => p.id === id)?.label?.[lang] || id)), /*#__PURE__*/React.createElement("div", {
    className: "h-px bg-slate-100 my-6 mx-2"
  }), !responses?.discussion ? /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(handleMeeting),
    className: "flex items-center gap-4 px-6 py-5 rounded-[24px] text-left text-sm font-black bg-blue-600 text-white shadow-xl animate-pulse"
  }, /*#__PURE__*/React.createElement(Users, {
    className: "w-4 h-4"
  }), " ", t.startMeeting) : /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(() => setActiveTab("discussion")),
    className: `flex items-center gap-4 px-6 py-5 rounded-[24px] text-left text-sm font-black transition-all ${activeTab === "discussion" ? 'bg-blue-600 text-white shadow-xl' : 'bg-blue-50 text-blue-600 hover:bg-blue-100'}`
  }, /*#__PURE__*/React.createElement(MessageSquare, {
    className: "w-4 h-4"
  }), " \u8B70\u8AD6\u8B70\u4E8B\u9332"), /*#__PURE__*/React.createElement("div", {
    className: "mt-auto pt-8"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(handleCopyAll),
    className: "w-full py-4 bg-slate-900 text-white rounded-2xl text-[10px] font-black flex items-center justify-center gap-3 shadow-xl hover:bg-black transition-all"
  }, /*#__PURE__*/React.createElement(Copy, {
    className: "w-4 h-4"
  }), " ", t.copy))), /*#__PURE__*/React.createElement("div", {
    className: "flex-1 bg-white relative flex flex-col"
  }, activeTab === "discussion" ? /*#__PURE__*/React.createElement("div", {
    className: "p-10 md:p-16 overflow-y-auto max-h-[800px] animate-in fade-in max-w-2xl mx-auto space-y-10"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-4 mb-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-4 bg-blue-600 text-white rounded-2xl shadow-lg"
  }, /*#__PURE__*/React.createElement(MessageSquare, {
    className: "w-6 h-6"
  })), /*#__PURE__*/React.createElement("h3", {
    className: "text-3xl font-black text-slate-800 tracking-tighter"
  }, "\u601D\u60F3\u306E\u6FC0\u7A81\u30ED\u30B0")), /*#__PURE__*/React.createElement("div", {
    className: "space-y-6 mb-12"
  }, responses?.discussion?.split('\n').map((line, i) => /*#__PURE__*/React.createElement("div", {
    key: i,
    className: `p-6 rounded-[28px] ${line.includes(':') ? 'bg-[#fcfdfe] border border-slate-100 shadow-sm' : 'text-slate-400 italic text-sm px-8'}`
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-xl leading-relaxed text-slate-700"
  }, line)))), responses?.action_plan && /*#__PURE__*/React.createElement("div", {
    className: "bg-slate-900 text-white p-10 rounded-[40px] shadow-2xl relative overflow-hidden group"
  }, /*#__PURE__*/React.createElement(ListChecks, {
    className: "absolute -bottom-8 -right-8 w-48 h-48 opacity-5"
  }), /*#__PURE__*/React.createElement("h4", {
    className: "text-[10px] font-black text-blue-400 uppercase tracking-[0.4em] mb-8 border-b border-white/10 pb-4"
  }, "\u5B9F\u884C\u30D7\u30E9\u30F3"), /*#__PURE__*/React.createElement("div", {
    className: "space-y-4 relative z-10"
  }, (Array.isArray(responses.action_plan) ? responses.action_plan : [responses.action_plan]).map((step, i) => /*#__PURE__*/React.createElement("p", {
    key: i,
    className: "text-2xl font-bold leading-relaxed text-slate-50 flex gap-4"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-blue-500 font-mono"
  }, i + 1, "."), " ", step))))) : /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col h-full bg-[#f0f2f5] md:max-h-[800px] animate-in fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white px-8 py-5 border-b shadow-sm flex items-center justify-between"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-3 bg-blue-50 rounded-2xl text-blue-600"
  }, ICON_MAP[personas.find(p => p.id === activeTab)?.icon] || /*#__PURE__*/React.createElement(User, {
    className: "w-6 h-6"
  })), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h3", {
    className: "font-black text-xl"
  }, personas.find(p => p.id === activeTab)?.label?.[lang] || activeTab), /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] text-green-500 font-black uppercase flex items-center gap-1"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-2 h-2 bg-green-500 rounded-full animate-pulse"
  }), " Active Messenger")))), /*#__PURE__*/React.createElement("div", {
    className: "flex-1 overflow-y-auto p-6 md:p-10 space-y-6"
  }, responses?.individual?.[activeTab]?.map((msg, i) => /*#__PURE__*/React.createElement("div", {
    key: i,
    className: `flex ${msg.role === 'ai' ? 'justify-start' : 'justify-end'} animate-in slide-in-from-bottom-2`
  }, /*#__PURE__*/React.createElement("div", {
    className: `max-w-[85%] md:max-w-[75%] p-6 rounded-[32px] text-xl font-medium shadow-sm leading-relaxed ${msg.role === 'ai' ? 'bg-white text-slate-800 rounded-bl-none border border-slate-100' : 'bg-green-600 text-white rounded-br-none'}`
  }, msg.text))), /*#__PURE__*/React.createElement("div", {
    ref: chatEndRef
  })), /*#__PURE__*/React.createElement("div", {
    className: "p-6 bg-white border-t border-slate-100"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex gap-4 bg-[#f0f2f5] p-2.5 rounded-[36px] border border-slate-200"
  }, /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: chatInput,
    onChange: e => setChatInput(e.target.value),
    onKeyDown: e => e.key === 'Enter' && handleAdvisorChat(activeTab),
    placeholder: t.chatPlaceholder,
    className: "flex-1 bg-transparent px-6 py-3 outline-none text-xl font-medium"
  }), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAdvisorChat(activeTab),
    disabled: !chatInput.trim() || isLoading,
    className: "bg-blue-600 text-white p-5 rounded-full shadow-2xl hover:bg-blue-700 active:scale-90 transition-all disabled:opacity-50"
  }, /*#__PURE__*/React.createElement(Send, {
    className: "w-6 h-6"
  })))))))), !responses && !isLoading && !isMeetingLoading && /*#__PURE__*/React.createElement("div", {
    className: "py-24 text-center bg-white rounded-[48px] border-4 border-dashed border-slate-100 flex flex-col items-center group transition-all hover:border-blue-100"
  }, /*#__PURE__*/React.createElement(History, {
    className: "w-16 h-16 text-slate-100 mb-6 group-hover:text-blue-100 transition-all duration-500"
  }), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-400 font-black text-xl"
  }, "\u30C1\u30FC\u30E0\u3092\u7DE8\u6210\u3057\u3001\u8B70\u984C\u3092\u6295\u4E0B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"))), /*#__PURE__*/React.createElement("footer", {
    className: "max-w-6xl mx-auto px-10 py-12 w-full flex items-center justify-between text-slate-300 text-[10px] font-black border-t mt-20 opacity-60"
  }, /*#__PURE__*/React.createElement("p", null, "\xA9 2026 Persona Mixer AI Pro"), /*#__PURE__*/React.createElement("span", {
    className: "bg-slate-100 text-slate-400 px-3 py-1 rounded-full"
  }, CURRENT_VERSION, " STABLE BUILD")), showManual && /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-[300] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-xl"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-[48px] w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col shadow-2xl animate-in zoom-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-10 border-b border-slate-100 flex items-center justify-between bg-slate-50/50"
  }, /*#__PURE__*/React.createElement("h2", {
    className: "text-3xl font-black tracking-tight"
  }, "\u30C7\u30D0\u30C3\u30B0\u30FB\u30AC\u30A4\u30C9"), /*#__PURE__*/React.createElement("button", {
    onClick: () => handleAction(() => setShowManual(false)),
    className: "p-3 hover:bg-slate-100 rounded-full transition-all"
  }, /*#__PURE__*/React.createElement(X, {
    className: "w-8 h-8 text-slate-400"
  }))), /*#__PURE__*/React.createElement("div", {
    className: "p-10 overflow-y-auto flex-1 space-y-10 text-slate-600 text-lg leading-relaxed font-medium"
  }, /*#__PURE__*/React.createElement("section", {
    className: "space-y-4"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "font-black text-2xl text-slate-900 border-l-8 border-blue-600 pl-6 uppercase"
  }, "v1.18.2 \u901A\u4FE1\u5B89\u5B9A\u5316\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8"), /*#__PURE__*/React.createElement("p", null, "\u751F\u6210\u30A8\u30E9\u30FC\u3092\u89E3\u6D88\u3059\u308B\u305F\u3081\u3001\u901A\u4FE1\u30EA\u30C8\u30E9\u30A4\u6A5F\u80FD\u3068JSON\u62BD\u51FA\u6A5F\u80FD\u3092\u5F37\u5316\u3057\u307E\u3057\u305F\u3002\u307E\u305F\u3001\u30DB\u30EF\u30A4\u30C8\u30A2\u30A6\u30C8\u306E\u539F\u56E0\u3068\u306A\u3063\u3066\u3044\u305F\u4E00\u90E8\u306E\u30A2\u30A4\u30B3\u30F3\u53C2\u7167\u3092\u4FEE\u6B63\u6E08\u307F\u3067\u3059\u3002"))))));
};

// export default App;

ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>